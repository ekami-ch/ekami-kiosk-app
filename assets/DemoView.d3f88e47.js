import{F as b,K as _}from"./kioskboard-aio-2.2.0.min.3b3130c4.js";import{_ as k,Q as y,S as C,a as w}from"./ekami128x128.9e22503c.js";import{D as B}from"./DownloadableCanvasTicket.2206301e.js";import{d as S,i as l,r as d,o as i,c as a,a as n,b as r,n as q,F as E,e as L,f as u,j as T,g as m,t as A}from"./index.8242e31a.js";const F=S({components:{FormNavigation:b,QrCode:y,DownloadableCanvasTicket:B},data(){return{eventBus:l("eventBus"),config:{},recap:[],isLoaded:!1}},methods:{downloadCanvas:function(){console.log("download");let t=document.querySelector("#lastname").value+" "+document.querySelector("#firstname").value+" "+document.querySelector("#birthdate").value,o=document.querySelector("#lastname").value+" "+document.querySelector("#firstname").value;this.eventBus.emit("generateAndDownloadQrCode",[t,o])},redirectToPlatform:function(t){switch(t.toLocaleLowerCase()){case"mobile":this.$router.push({name:"Mobile"});break;case"kiosk":this.$router.push({name:"Kiosk"});break;case"demo":this.$router.push({name:"Demo"});break}},addAnotherPerson:function(){this.eventBus.emit("updateQrCode"),setTimeout(()=>{this.eventBus.emit("downloadQrCodeCanvas"),document.querySelectorAll("input").forEach(t=>{t.hasAttribute("resettable")&&(t.value="")})},1e3)},printTicket:function(){this.eventBus.emit("updateQrCode"),setTimeout(()=>{this.eventBus.emit("downloadQrCodeCanvas"),window.location.reload()},1e3)},fetchConfigFile:function(t){fetch(t).then(o=>o.json()).then(o=>{this.config=o}).catch(o=>{var c;this.isLoaded=!0;let s=document.createElement("div");s.id="error_config",s.innerHTML="Invalid or Config File not found. Please check configuration file.",(c=document.querySelector("body"))==null||c.appendChild(s)})}},created(){this.fetchConfigFile("/config.json")},mounted(){this.eventBus=l("eventBus")},updated(){var e=this;if(!e.isLoaded){e.eventBus.on("updateRecap",function(o){e.recap=o}),document.querySelectorAll(".print-button").forEach(function(o){o.addEventListener("click",function(){e.printTicket()})}),document.querySelectorAll(".print-add-button").forEach(function(o){o.addEventListener("click",function(){e.addAnotherPerson(),e.eventBus.emit("returnToBeginning")})}),document.querySelectorAll(".cancel-button").forEach(function(o){o.addEventListener("click",function(){window.location.reload()})});var t=document.querySelector(e.config.form.id);t==null||t.addEventListener("change",()=>{e.eventBus.emit("updateQrCode","test")}),t==null||t.addEventListener("keyup",()=>{e.eventBus.emit("updateQrCode","test")}),document.querySelectorAll(".slim-select").forEach(o=>{new C({select:"#"+o.id,showSearch:!1})});for(const[o,s]of Object.entries(e.config.keyboards))_.run(s.target,s.options);e.isLoaded=!0}}}),Q={class:"container-fluid vh-100",id:"main_container"},D={class:"row vh-100"},M={class:"col-3 bg-light align-items-center position-relative text-center",id:"utility_container"},O={class:"mb-3 vh-100"},N=["src"],P={class:"p-2 mt-4",id:"buttons_div"},$=n("button",{class:"col-12 print-button m-2 fw-bold btn btn-kiosk ml-auto gx-1 btn-lg btn-success"},[n("span",{class:"fs-3"},[n("i",{class:"bi bi-person-check-fill"}),m(" Termin\xE9")])],-1),V=n("span",{class:"fs-3"},[n("i",{class:"bi bi-person-plus-fill"}),m(" Autre Personne ")],-1),j=[V],I=n("h4",{class:"fw-bold"},"Your information",-1),K={class:"w-100 p-2",id:"recap_div"},G=n("div",{class:"w-100 mb-5 text-muted position-absolute bottom-0 start-50 translate-middle-x",id:"copyright"},[n("img",{height:"32",width:"32",src:w,id:"copyright_logo"}),n("a",null," EKAMI SA (Gen\xE8ve)")],-1),z={class:"col-9"};function H(e,t,o,s,c,R){const f=d("FormNavigation"),p=d("QrCode"),h=d("DownloadableCanvasTicket");return i(),a("main",null,[n("div",Q,[n("div",D,[n("div",M,[n("div",O,[e.config.companyLogo!=""?(i(),a("img",{key:0,class:"img-fluid p-4 pt-5",id:"company_logo",src:e.config.companyLogo},null,8,N)):r("",!0),n("div",P,[$,e.config.colors?(i(),a("button",{key:0,class:"col-12 print-add-button m-2 fw-bold btn btn-kiosk ml-auto gx-1 btn-lg",style:q({backgroundColor:e.config.colors.primary,color:e.config.colors.secondary})},j,4)):r("",!0)]),I,n("div",K,[(i(!0),a(E,null,L(e.recap,(g,v)=>(i(),a("p",{key:v},A(g),1))),128))]),G])]),n("div",z,[e.config.form?(i(),u(f,{key:0,formId:e.config.form.id,formClass:e.config.form.class,groupFields:e.config.form.fieldGroups,colors:e.config.colors,thanksMessage:e.config.form.thanksMessage,endMessage:e.config.form.endMessage,datepickerOptions:e.config.datepickerOptions},null,8,["formId","formClass","groupFields","colors","thanksMessage","endMessage","datepickerOptions"])):r("",!0),e.config.qrOptions?(i(),u(p,{key:1,qrOptions:e.config.qrOptions,context:e.config.context,qrCodeId:"qrcode"},null,8,["qrOptions","context"])):r("",!0),T(h)])])])])}var X=k(F,[["render",H]]);export{X as default};
