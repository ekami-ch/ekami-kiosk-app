import{F as b}from"./FormNavigation.aaf1c781.js";import{_,Q as k}from"./QrCode.6aaa7f57.js";import{K as y}from"./kioskboard-aio-2.2.0.min.ed88aa12.js";import{S as w,_ as C}from"./ekami128x128.88646b6f.js";import{d as S,i as d,r as u,o as i,c as a,a as t,b as c,n as q,F as B,e as L,f as m,g as f,t as E}from"./index.a479a3c5.js";const A=S({components:{FormNavigation:b,QrCode:k},data(){return{eventBus:d("eventBus"),config:{},recap:[],isLoaded:!1}},methods:{downloadCanvas:function(){console.log("download");let o=document.querySelector("#lastname").value+" "+document.querySelector("#firstname").value+" "+document.querySelector("#birthdate").value,s=document.querySelector("#lastname").value+" "+document.querySelector("#firstname").value;this.eventBus.emit("generateAndDownloadQrCode",[o,s])},redirectToPlatform:function(o){switch(o.toLocaleLowerCase()){case"mobile":this.$router.push({name:"Mobile"});break;case"kiosk":this.$router.push({name:"Kiosk"});break;case"demo":this.$router.push({name:"Demo"});break}},addAnotherPerson:function(){this.eventBus.emit("updateQrCode"),setTimeout(function(){window.print(),document.querySelectorAll("input").forEach(o=>{o.hasAttribute("resettable")&&(o.value="")})},1e3)},printTicket:function(){this.eventBus.emit("updateQrCode"),setTimeout(function(){window.print(),window.location.reload()},1e3)},fetchConfigFile:function(o){fetch(o).then(s=>s.json()).then(s=>{this.config=s}).catch(s=>{var n;this.isLoaded=!0;let r=document.createElement("div");r.id="error_config",r.innerHTML="Invalid or Config File not found. Please check configuration file.",(n=document.querySelector("body"))==null||n.appendChild(r)})}},created(){this.fetchConfigFile("/config.json")},mounted(){this.eventBus=d("eventBus")},updated(){var e=this;if(!e.isLoaded){e.eventBus.on("updateRecap",function(n){e.recap=n});let s=new URLSearchParams(document.location.search.substring(1)),r=s.has("platform")?s.get("platform"):"kiosk";this.redirectToPlatform(r),document.querySelectorAll(".print-button").forEach(function(n){n.addEventListener("click",function(){e.printTicket()})}),document.querySelectorAll(".print-add-button").forEach(function(n){n.addEventListener("click",function(){e.addAnotherPerson(),e.eventBus.emit("returnToBeginning")})}),document.querySelectorAll(".cancel-button").forEach(function(n){n.addEventListener("click",function(){window.location.reload()})});var o=document.querySelector(e.config.form.id);o==null||o.addEventListener("change",()=>{e.eventBus.emit("updateQrCode","test")}),o==null||o.addEventListener("keyup",()=>{e.eventBus.emit("updateQrCode","test")}),document.querySelectorAll(".slim-select").forEach(n=>{new w({select:"#"+n.id,showSearch:!1})});for(const[n,l]of Object.entries(e.config.keyboards))y.run(l.target,l.options);e.isLoaded=!0}}}),F={class:"container-fluid vh-100",id:"main_container"},P={class:"row vh-100"},T={class:"col-3 bg-light align-items-center position-relative text-center",id:"utility_container"},M={class:"mb-3 vh-100"},Q=["src"],O={class:"p-2 mt-4",id:"buttons_div"},$=t("button",{class:"col-12 print-button m-2 fw-bold btn btn-kiosk ml-auto gx-1 btn-lg btn-success"},[t("span",{class:"fs-3"},[t("i",{class:"bi bi-person-check-fill"}),f(" Termin\xE9")])],-1),N=t("span",{class:"fs-3"},[t("i",{class:"bi bi-person-plus-fill"}),f(" Autre Personne ")],-1),I=[N],V=t("h4",{class:"fw-bold"},"Your information",-1),j={class:"w-100 p-2",id:"recap_div"},K=t("div",{class:"w-100 mb-5 text-muted position-absolute bottom-0 start-50 translate-middle-x",id:"copyright"},[t("img",{height:"32",width:"32",src:C,id:"copyright_logo"}),t("a",null," EKAMI SA (Gen\xE8ve)")],-1),D={class:"col-9"};function G(e,o,s,r,n,l){const p=u("FormNavigation"),g=u("QrCode");return i(),a("main",null,[t("div",F,[t("div",P,[t("div",T,[t("div",M,[e.config.companyLogo!=""?(i(),a("img",{key:0,class:"img-fluid p-4 pt-5",id:"company_logo",src:e.config.companyLogo},null,8,Q)):c("",!0),t("div",O,[$,e.config.colors?(i(),a("button",{key:0,class:"col-12 print-add-button m-2 fw-bold btn btn-kiosk ml-auto gx-1 btn-lg",style:q({backgroundColor:e.config.colors.primary,color:e.config.colors.secondary})},I,4)):c("",!0)]),V,t("div",j,[(i(!0),a(B,null,L(e.recap,(h,v)=>(i(),a("p",{key:v},E(h),1))),128))]),K])]),t("div",D,[e.config.form?(i(),m(p,{key:0,formId:e.config.form.id,formClass:e.config.form.class,groupFields:e.config.form.fieldGroups,colors:e.config.colors,thanksMessage:e.config.form.thanksMessage,endMessage:e.config.form.endMessage,datepickerOptions:e.config.datepickerOptions},null,8,["formId","formClass","groupFields","colors","thanksMessage","endMessage","datepickerOptions"])):c("",!0),e.config.qrOptions?(i(),m(g,{key:1,qrOptions:e.config.qrOptions,context:e.config.context,qrCodeId:"qrcode"},null,8,["qrOptions","context"])):c("",!0)])])])])}var J=_(A,[["render",G]]);export{J as default};
