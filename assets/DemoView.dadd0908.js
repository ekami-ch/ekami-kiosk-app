import{F as _}from"./FormNavigation.aaf1c781.js";import{_ as k,Q as y}from"./QrCode.6aaa7f57.js";import{K as C}from"./kioskboard-aio-2.2.0.min.ed88aa12.js";import{S as w,_ as S}from"./ekami128x128.88646b6f.js";import{D as B}from"./DownloadableCanvasTicket.b3764349.js";import{d as q,i as u,r as d,o as i,c as r,a as t,b as c,n as L,F as E,e as T,f as m,j as A,g as f,t as F}from"./index.a479a3c5.js";const Q=q({components:{FormNavigation:_,QrCode:y,DownloadableCanvasTicket:B},data(){return{eventBus:u("eventBus"),config:{},recap:[],isLoaded:!1}},methods:{downloadCanvas:function(){console.log("download");let o=document.querySelector("#lastname").value+" "+document.querySelector("#firstname").value+" "+document.querySelector("#birthdate").value,s=document.querySelector("#lastname").value+" "+document.querySelector("#firstname").value;this.eventBus.emit("generateAndDownloadQrCode",[o,s])},redirectToPlatform:function(o){switch(o.toLocaleLowerCase()){case"mobile":this.$router.push({name:"Mobile"});break;case"kiosk":this.$router.push({name:"Kiosk"});break;case"demo":this.$router.push({name:"Demo"});break}},addAnotherPerson:function(){this.eventBus.emit("updateQrCode"),setTimeout(()=>{this.eventBus.emit("downloadQrCodeCanvas"),document.querySelectorAll("input").forEach(o=>{o.hasAttribute("resettable")&&(o.value="")})},1e3)},printTicket:function(){this.eventBus.emit("updateQrCode"),setTimeout(()=>{this.eventBus.emit("downloadQrCodeCanvas"),window.location.reload()},1e3)},fetchConfigFile:function(o){fetch(o).then(s=>s.json()).then(s=>{this.config=s}).catch(s=>{var n;this.isLoaded=!0;let a=document.createElement("div");a.id="error_config",a.innerHTML="Invalid or Config File not found. Please check configuration file.",(n=document.querySelector("body"))==null||n.appendChild(a)})}},created(){this.fetchConfigFile("/config.json")},mounted(){this.eventBus=u("eventBus")},updated(){var e=this;if(!e.isLoaded){e.eventBus.on("updateRecap",function(n){e.recap=n});let s=new URLSearchParams(document.location.search.substring(1)),a=s.has("platform")?s.get("platform"):"demo";this.redirectToPlatform(a),document.querySelectorAll(".print-button").forEach(function(n){n.addEventListener("click",function(){e.printTicket()})}),document.querySelectorAll(".print-add-button").forEach(function(n){n.addEventListener("click",function(){e.addAnotherPerson(),e.eventBus.emit("returnToBeginning")})}),document.querySelectorAll(".cancel-button").forEach(function(n){n.addEventListener("click",function(){window.location.reload()})});var o=document.querySelector(e.config.form.id);o==null||o.addEventListener("change",()=>{e.eventBus.emit("updateQrCode","test")}),o==null||o.addEventListener("keyup",()=>{e.eventBus.emit("updateQrCode","test")}),document.querySelectorAll(".slim-select").forEach(n=>{new w({select:"#"+n.id,showSearch:!1})});for(const[n,l]of Object.entries(e.config.keyboards))C.run(l.target,l.options);e.isLoaded=!0}}}),P={class:"container-fluid vh-100",id:"main_container"},D={class:"row vh-100"},M={class:"col-3 bg-light align-items-center position-relative text-center",id:"utility_container"},O={class:"mb-3 vh-100"},N=["src"],$={class:"p-2 mt-4",id:"buttons_div"},V=t("button",{class:"col-12 print-button m-2 fw-bold btn btn-kiosk ml-auto gx-1 btn-lg btn-success"},[t("span",{class:"fs-3"},[t("i",{class:"bi bi-person-check-fill"}),f(" Termin\xE9")])],-1),j=t("span",{class:"fs-3"},[t("i",{class:"bi bi-person-plus-fill"}),f(" Autre Personne ")],-1),I=[j],K=t("h4",{class:"fw-bold"},"Your information",-1),G={class:"w-100 p-2",id:"recap_div"},R=t("div",{class:"w-100 mb-5 text-muted position-absolute bottom-0 start-50 translate-middle-x",id:"copyright"},[t("img",{height:"32",width:"32",src:S,id:"copyright_logo"}),t("a",null," EKAMI SA (Gen\xE8ve)")],-1),z={class:"col-9"};function H(e,o,s,a,n,l){const p=d("FormNavigation"),h=d("QrCode"),g=d("DownloadableCanvasTicket");return i(),r("main",null,[t("div",P,[t("div",D,[t("div",M,[t("div",O,[e.config.companyLogo!=""?(i(),r("img",{key:0,class:"img-fluid p-4 pt-5",id:"company_logo",src:e.config.companyLogo},null,8,N)):c("",!0),t("div",$,[V,e.config.colors?(i(),r("button",{key:0,class:"col-12 print-add-button m-2 fw-bold btn btn-kiosk ml-auto gx-1 btn-lg",style:L({backgroundColor:e.config.colors.primary,color:e.config.colors.secondary})},I,4)):c("",!0)]),K,t("div",G,[(i(!0),r(E,null,T(e.recap,(v,b)=>(i(),r("p",{key:b},F(v),1))),128))]),R])]),t("div",z,[e.config.form?(i(),m(p,{key:0,formId:e.config.form.id,formClass:e.config.form.class,groupFields:e.config.form.fieldGroups,colors:e.config.colors,thanksMessage:e.config.form.thanksMessage,endMessage:e.config.form.endMessage,datepickerOptions:e.config.datepickerOptions},null,8,["formId","formClass","groupFields","colors","thanksMessage","endMessage","datepickerOptions"])):c("",!0),e.config.qrOptions?(i(),m(h,{key:1,qrOptions:e.config.qrOptions,context:e.config.context,qrCodeId:"qrcode"},null,8,["qrOptions","context"])):c("",!0),A(g)])])])])}var x=k(Q,[["render",H]]);export{x as default};
